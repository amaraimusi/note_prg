<!DOCTYPE html>
<html lang="ja">
<head>
	<meta charset="UTF-8">
	<meta name="google" content="notranslate" />
   	<meta http-equiv="X-UA-Compatible" content="IE=edge">
   	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Vue.jsの覚書</title>
	
	<link href="/note_prg/css/jquery-ui.min.css" rel="stylesheet">
	<link href="/note_prg/css/bootstrap.min.css" rel="stylesheet">
	<link href="/note_prg/css/highlight/default.css" rel="stylesheet">
	<link href="/note_prg/css/common2.css" rel="stylesheet">

	<script src="/note_prg/js/jquery-1.11.1.min.js"></script>
	<script src="/note_prg/js/bootstrap.min.js"></script>
	<script src="/note_prg/js/highlight.pack.js"></script>
	<script src="/note_prg/js/livipage.js"></script>
	<script src="/note_prg/js/ImgCompactK.js"></script>


	<script>hljs.initHighlightingOnLoad();</script>
</head>
<body>
<div id="header" ><h1>Vue.jsの覚書</h1></div>
<div class="container">







<div id="sec1-1" class="sec4" >
	<h3>Vue.jsの一覧表示、簡易検索、ソート</h3>

	<a href="http://localhost/sample/js/vue_js/demo/demo1.html" class="btn btn-info">デモ</a><br>
	<br>
	
	HTML
	<pre><code>
	<script src="vue.min.js"></script>
	&lt;script src="vue.min.js"&gt;&lt;/script&gt;
	～　略　～
	&lt;div id="app-1"&gt;
		&lt;input type="text" v-model="search_word" placeholder="簡易検索"&gt;
		&lt;table class="table"&gt;
			&lt;thead&gt;
				&lt;tr&gt;
					&lt;th v-for="(value, key) in clms" @click="sort(key)"&gt;
						{{value}}
					&lt;/th&gt;
				&lt;/tr&gt;
			&lt;/thead&gt;
			&lt;tbody&gt;
			&lt;tr v-for="animal in filteredData"&gt;
				&lt;td v-for="(value, key) in clms"&gt;{{animal[key]}}&lt;/td&gt;
			&lt;/tr&gt;
			&lt;/tbody&gt;
		&lt;/table&gt;
	&lt;/div&gt;
	</code></pre>
	<br>
	
	JavaScript
	<pre><code>
	window.onload = function() {
	
		var clms = {
				id: 'ID',
				name: '市町村名',
				code: 'コード',
			};
			
		var animals = [
			{id:5,name:'ゴリラ',code:'gorira'},
			{id:6,name:'ローランドニシゴリラ',code:'l_west_gorira'},
			{id:7,name:'ナウマンゾウ',code:'nauman-elephant'},
			{id:8,name:'ハダカネズミ',code:'hadaka-nezumi'},
		];
		
		var sortOrders = [];// 順序データ
		for(var key in clms){
			sortOrders[key] = 1;
		}
	
		var app2 = new Vue({
				el: '#app-1',
				data: {
					clms:clms,
					animals: animals,
					sortOrders: sortOrders,
					search_word: '', // 簡易検索
				},
				methods: {
					sort: function(sortKey) { // 列名クリックイベント：一覧をソートする
						
						// 並び順の切替（昇順、降順を切り替える）
						this.sortOrders[sortKey] = this.sortOrders[sortKey] * -1;
				
						var data = this.animals;
						var order = this.sortOrders[sortKey];
				 
						// 並べ替え処理
						data = data.slice().sort(function(a, b){
							a = a[sortKey];
							b = b[sortKey];
							return (a === b ? 0 : a &gt; b ? 1 : -1) * order;
						});
						
						this.animals = data; // データを更新。更新しないと一覧に反映されない。
					}
				},
				
				computed: {
					filteredData: function () {
						var data = this.animals; // 元データに影響を与えないようdataにクローンコピーする。
						var filterWord = this.search_word.toLowerCase(); // 簡易検索を取得する。（テキストボックスと連動されている）
						if(filterWord) {
							// dataに対し、簡易検索で絞り込みを行う。全列が検索対象。
							data = data.filter(function (row) {
								return Object.keys(row).some(function (key) {
									return String(row[key]).toLowerCase().indexOf(filterWord) &gt; -1
								})
							})
						}
						return data;
					}
				}
				
			});
	}
	</code></pre>
	<br>
	
	<br><time>2017-12-15</time>
</div>







<div id="sec1-0" class="sec4" style="display:none">
	<h3>xxx</h3>

	<pre><code>
	</code></pre>
	<br>
	
	<br><time></time>
</div>










<div class="yohaku"></div>
<ol class="breadcrumb">
	<li><a href="/">ホーム</a></li>
	<li><a href="/note_prg">プログラミングの覚書</a></li>
	<li><a href="/note_prg/js/">JavaScriptの覚書</a></li>
	<li>Vue.jsの覚書</li>
</ol>

</div><!-- content -->
<div id="footer">(C) kenji uehara 2017-12-15</div>
</body>
</html>