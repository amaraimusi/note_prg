<!DOCTYPE html>
<html lang="ja">
<head>
	<meta charset="UTF-8">
	<meta name="google" content="notranslate" />
   	<meta http-equiv="X-UA-Compatible" content="IE=edge">
   	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>JavaScriptの覚書 | ワクガンス</title>
	<link rel='shortcut icon' href='/home/images/favicon.ico' />
	
	<link href="/note_prg/css/bootstrap.min.css" rel="stylesheet">
	<link href="/note_prg/css/highlight/default.css" rel="stylesheet">
	<link href="/note_prg/css/common2.css" rel="stylesheet">
	<script src="/note_prg/js/jquery3.js"></script>	<!-- jquery-3.3.1.min.js -->
	<script src="/note_prg/js/bootstrap.min.js"></script>
	<script src="/note_prg/js/vue.min.js"></script>
	<script src="/note_prg/js/highlight.pack.js"></script>
	<script src="/note_prg/js/livipage.js"></script>
	<script src="/note_prg/js/ImgCompactK.js"></script>

	<script>hljs.initHighlightingOnLoad();</script>
</head>
<body>
<div id="header" ><h1>JavaScriptの覚書 | ワクガンス</h1></div>
<div class="container">


<div id="sec19-1" class="sec4" >
	<h3>静的テーブルのページネーション(Bootstrap4対応) | static_pagination_b4.js</h3>
	
	<a href="/sample/js/a014/static_pagination_b4/static_pagination_b4.html" class="btn btn-info">Demo</a><br>
	<br>
	
	<p>HTML</p>
	<pre>
&lt;link href="bootstrap.min.css" rel="stylesheet"&gt;

&lt;script src="jquery3.js"&gt;&lt;/script&gt;	&lt;!-- jquery-3.3.1.min.js --&gt;
&lt;script src="bootstrap.bundle.min.js"&gt;&lt;/script&gt;
&lt;script src="<strong>static_pagination_b4.js</strong>"&gt;&lt;/script&gt;
&lt;script src="script.js"&gt;&lt;/script&gt;
～略～
	
&lt;table id="<strong>tbl1</strong>" class="table"&gt;
	&lt;thead&gt;
		&lt;tr&gt;&lt;th&gt;No&lt;/th&gt;&lt;th&gt;分類&lt;/th&gt;&lt;th&gt;種別&lt;/th&gt;&lt;th&gt;名前&lt;/th&gt;&lt;th&gt;学名&lt;/th&gt;&lt;th&gt;レッドデータ&lt;/th&gt;&lt;/tr&gt;
	&lt;/thead&gt;
	&lt;tbody&gt;
		&lt;tr&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;両生類&lt;/td&gt;&lt;td&gt;サンショウウオ&lt;/td&gt;&lt;td&gt;アカイシサンショウウオ&lt;/td&gt;&lt;td&gt;Hynobius katoi&lt;/td&gt;&lt;td&gt;絶滅危惧IB類&lt;/td&gt;&lt;/tr&gt;
		&lt;tr&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;両生類&lt;/td&gt;&lt;td&gt;サンショウウオ&lt;/td&gt;&lt;td&gt;ハクバサンショウウオ&lt;/td&gt;&lt;td&gt;Hynobius hidamontanus&lt;/td&gt;&lt;td&gt;絶滅危惧IB類&lt;/td&gt;&lt;/tr&gt;
		&lt;tr&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;両生類&lt;/td&gt;&lt;td&gt;サンショウウオ&lt;/td&gt;&lt;td&gt;ホクリクサンショウウオ&lt;/td&gt;&lt;td&gt;Hynobius takedai&lt;/td&gt;&lt;td&gt;絶滅危惧IB類&lt;/td&gt;&lt;/tr&gt;
		&lt;tr&gt;&lt;td&gt;5&lt;/td&gt;&lt;td&gt;両生類&lt;/td&gt;&lt;td&gt;サンショウウオ&lt;/td&gt;&lt;td&gt;オオイタサンショウウオ&lt;/td&gt;&lt;td&gt;Hynobius dunni&lt;/td&gt;&lt;td&gt;絶滅危惧II類&lt;/td&gt;&lt;/tr&gt;
		&lt;tr&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;両生類&lt;/td&gt;&lt;td&gt;サンショウウオ&lt;/td&gt;&lt;td&gt;オオダイガハラサンショウウオ&lt;/td&gt;&lt;td&gt;Hynobius boulengeri&lt;/td&gt;&lt;td&gt;絶滅危惧II類&lt;/td&gt;&lt;/tr&gt;
		&lt;tr&gt;&lt;td&gt;7&lt;/td&gt;&lt;td&gt;両生類&lt;/td&gt;&lt;td&gt;サンショウウオ&lt;/td&gt;&lt;td&gt;オキサンショウウオ&lt;/td&gt;&lt;td&gt;Hynobius okiensis&lt;/td&gt;&lt;td&gt;絶滅危惧II類&lt;/td&gt;&lt;/tr&gt;
		&lt;tr&gt;&lt;td&gt;8&lt;/td&gt;&lt;td&gt;両生類&lt;/td&gt;&lt;td&gt;サンショウウオ&lt;/td&gt;&lt;td&gt;カスミサンショウウオ&lt;/td&gt;&lt;td&gt;Hynobius nebulosus&lt;/td&gt;&lt;td&gt;絶滅危惧II類&lt;/td&gt;&lt;/tr&gt;
		&lt;tr&gt;&lt;td&gt;9&lt;/td&gt;&lt;td&gt;両生類&lt;/td&gt;&lt;td&gt;サンショウウオ&lt;/td&gt;&lt;td&gt;トウキョウサンショウウオ&lt;/td&gt;&lt;td&gt;Hynobius tokyoensis&lt;/td&gt;&lt;td&gt;絶滅危惧II類&lt;/td&gt;&lt;/tr&gt;
		&lt;tr&gt;&lt;td&gt;10&lt;/td&gt;&lt;td&gt;両生類&lt;/td&gt;&lt;td&gt;サンショウウオ&lt;/td&gt;&lt;td&gt;ベッコウサンショウウオ&lt;/td&gt;&lt;td&gt;Hynobius stejnegeri&lt;/td&gt;&lt;td&gt;絶滅危惧II類&lt;/td&gt;&lt;/tr&gt;
		&lt;tr&gt;&lt;td&gt;11&lt;/td&gt;&lt;td&gt;両生類&lt;/td&gt;&lt;td&gt;サンショウウオ&lt;/td&gt;&lt;td&gt;キタサンショウウオ&lt;/td&gt;&lt;td&gt;Salamandrella keyserlingii&lt;/td&gt;&lt;td&gt;準絶滅危惧&lt;/td&gt;&lt;/tr&gt;
		&lt;tr&gt;&lt;td&gt;12&lt;/td&gt;&lt;td&gt;両生類&lt;/td&gt;&lt;td&gt;サンショウウオ&lt;/td&gt;&lt;td&gt;イシヅチサンショウウオ&lt;/td&gt;&lt;td&gt;Hynobius hirosei&lt;/td&gt;&lt;td&gt;準絶滅危惧&lt;/td&gt;&lt;/tr&gt;
	&lt;/tbody&gt;
&lt;/table&gt;
	</pre>

	<p>JavaScript</p>
	<pre><code>
$(() =&gt;{

	let staticPagenationB4 = new StaticPaginationB4();
	staticPagenationB4.pagenation('tbl1',{cur_page_num:'last'});

});
	</code></pre>
	
	<p>static_pagination_b4.js</p>
	<pre><code>

/**
 * 静的テーブルをページネーション化する。ページネーションはBootstrap4に対応
 * @since 2022-1-20
 * @license MIT
 * @auther amaraimusi
 * @version 1.0.0
 */
class StaticPaginationB4{
	
	/**
	 * 静的テーブルをページネーション化する
	 * @param xid string テーブル要素のid属性値
	 * @param {} param パラメータ
	 * - visible_row_count 表示行数
	 * - cur_page_num カレントページ番号	 0にすると先頭が初期アクティブ、任意の数値を入れるとそのぺージがアクティブ、 「last」入力すると最後のページがアクティブになる。
	 * - pn_position ページネーションの位置 top:テーブルの上, bottom:テーブルの下(デフォルト)
	 */
	pagenation(xid, param){
		
		// パラメータにデフォルトをセット
		if(param == null) param = {};
		if(param.visible_row_count == null ) param.visible_row_count = 8; // 表示行数
		if(param.cur_page_num == null) param.cur_page_num = 0; // 初期カレント行番号
		if(param.pn_position == null ) param.pn_position = 'bottom'; // 表示行数
		
		param['xid'] = xid;
		
		let visible_row_count = param.visible_row_count;
		let pn_position = param.pn_position;
		
		let tbl = jQuery('#' + xid);
		let trs = tbl.find('tbody tr');
		let num_rows = trs.length;
		if(num_rows == 0) return; //行数が0件ならページネーション作成を中断
		
		param['num_rows'] = num_rows; // 全行数
		param['all_page_count'] = Math.ceil(num_rows / visible_row_count); // 全ページ数
		
		// 初期カレントページにlast(最終ページ)が指定されている場合、最終ページ番号をセットする
		if(param.cur_page_num == 'last'){
			param.cur_page_num = param.all_page_count - 1;
		}
		let cur_page_num = param.cur_page_num;

		// テーブルに適用する
		this._applyToTable(trs, cur_page_num, visible_row_count);
		
		// ページネーションHTMLを作成する。
		let pg_html = this._createPagenationHtml(param);
		
		tbl.after(pg_html);
		
		// ページネーションにクリックイベントを追加する
		this._bindClickPagenation(param); 
		
		this.param = param;
		this.trs =trs;
	}
	
	/**
	 * テーブルに適用する
	 * @param trs TR群要素
	 * @param cur_page_num カレントページ番号
	 * @param visible_row_count 表示行数
	 */
	_applyToTable(trs, cur_page_num, visible_row_count){
		trs.hide().slice(cur_page_num * visible_row_count, (cur_page_num + 1) * visible_row_count).show();
	}
	
	
	// ページネーションHTMLを作成する。
	_createPagenationHtml(param){
		
		let items_html = '';
		for(let page_no=0; page_no &lt; param.all_page_count; page_no++){
			
			let active_str = '';
			if(page_no == param.cur_page_num) active_str = 'active';
			items_html += `&lt;li class="page-item ${active_str}"&gt;&lt;span class="page-link"&gt;${page_no + 1}&lt;/span&gt;&lt;/li&gt;`;
		}
		
		let html = `&lt;ul id="${param.xid}_pagenation" class="pagination"&gt;${items_html}&lt;/ul&gt;`;
		
		return html;
	}
	
	// ページネーションにクリックイベントを追加する
	_bindClickPagenation(param){
		let pgItems = jQuery(`#${param.xid}_pagenation li`);
		this.pgItems = pgItems;
		pgItems.each((i,elm) =&gt; {
			
				// ページ番号要素をクリックしたときのイベント
				jQuery(elm).click(evt=&gt;{
					this.pgItems.removeClass('active');
					let cur_page_num = this.param.cur_page_num;
					let visible_row_count = this.param.visible_row_count;
					cur_page_num = i;
					this._applyToTable(this.trs, cur_page_num, visible_row_count);
					this.param.cur_page_num = cur_page_num;
					
					var item = $(evt.currentTarget);
					item.addClass('active');
					
				});
			});
		
	}
	
}
	</code></pre>

	<br><time>2022-1-21</time>
</div>


<div id="sec19-2" class="sec4" >
	<h3>モーダル化ライブラリ | modal_cat.js</h3>
	
	<a href="/sample/js/a015/modal_cat_js/modal_cat_js.html" class="btn btn-info">Demo</a>
	<a href="https://github.com/amaraimusi/sample/tree/master/js/a015/modal_cat_js" class="btn btn-info" target="_blank">GitHubソースコード</a><br>
	<br>
	
	<p>HTML</p>
	<pre><code>
&lt;div&gt;&lt;button type="button" class="btn btn-success" onclick="openModal()"&gt;開く&lt;/button&gt;&lt;/div&gt;
&lt;div id="sample_modal"&gt;
	&lt;h3&gt;イエスが預言した終わりの日の前兆&lt;/h3&gt;
	&lt;ul&gt;
		&lt;li&gt;世界大戦&lt;/li&gt;
		&lt;li&gt;各地で起こる食料不足&lt;/li&gt;
		&lt;li&gt;あちこちで起こる大地震&lt;/li&gt;
		&lt;li&gt;世界的な流行病&lt;/li&gt;
		&lt;li&gt;恐ろしい光景&lt;/li&gt;
		&lt;li&gt;天からの大きなしるし&lt;/li&gt;
	&lt;/ul&gt;
	#預言　#予言
	&lt;div&gt;&lt;button type="button" class="btn btn-primary" onclick="closeModal()"&gt;閉じる&lt;/button&gt;&lt;/div&gt;
&lt;/div&gt;
	</code></pre>
	
	<p>JavaScript</p>
	<pre><code>
var modalCat;
$(()=>{
	
	modalCat = new ModalCat();
	modalCat.modalize('sample_modal');
	
});

function openModal(){
	modalCat.open();
}

function closeModal(){
	modalCat.close();
}
	</code></pre>
	
	<p>modal_cat.js</p>
	<pre><code>

/**
 * モーダル化ライブラリ
 * @since 2022-1-21
 * @version 1.0.0
 * @auther amaraimusi
 * @license MIT
 */
class ModalCat{
	
	modalize(xid){
		
		let main_xid = xid + '_js_main'; // xidで指定した要素のラップ要素（指定要素の親要素）
		let close_xid = xid + '_js_modal_close';// id属性名：背景クリックによる閉じる

		let content = jQuery('#' + xid);
		content.wrap(`&lt;div id='${main_xid}'&gt;&lt;/div&gt;`); // モーダル化制御のためmain要素でラッピング
		let main = jQuery('#' + main_xid);
		
		let bg_close_html = `&lt;div id='${close_xid}'&gt;&lt;/div&gt;`;
		main.prepend(bg_close_html);
		
		let bgClose = jQuery(main.find('#' + close_xid)); // 背景クリック閉じる用要素
		
		main.css({
			display: 'none',
			height: '100vh',
			position: 'fixed',
			top: '0',
			left: '0',
			width: '100vw',
		});
		
		bgClose.css({
			background: 'rgba(0,0,0,0.8)',
			height: '100vh',
			position: 'absolute',
			width: '100vw',
		});
		
		content.css({
			background: '#fff',
			left: '50%',
			padding: '40px',
			position: 'absolute',
			top: '50%',
			transform: 'translate(-50%,-50%)',
			width: '60%',
		});

		this.main = main;

		bgClose.on('click',()=&gt;{
			this.main.fadeOut();
			return false;
		});
		
	}
	
	open(){
		this.main.fadeIn();
	}
	
	close(){
		this.main.fadeOut();
	}
}
	</code></pre>

	<br><time>2022-1-21</time>
</div>


<div id="sec19-3" class="sec4"  >
	<h3>ポップアップ | PopupCat.js</h3>
	
	<a href="/sample/js/a015/popup_cat/popup_cat.html" class="btn btn-info">Demo</a>
	<a href="https://github.com/amaraimusi/sample/tree/master/js/a015/popup_cat" target="_blank" class="btn btn-info">GitHub</a><br>
	<br>
	
	<p>HTML</p>
	<pre><code>
	&lt;script src="/note_prg/js/jquery.min.js"&gt;&lt;/script&gt;	
	&lt;script src="PopupCat.js"&gt;&lt;/script&gt;
	&lt;script src="script.js"&gt;&lt;/script&gt;

	～略～
	
	&lt;div  id="example1" style="width:25vw;height:20vh;background-color:#b5cffb"&gt;あいうえお&lt;/div&gt;
	&lt;button type="button" onclick="test1()"&gt;ポップアップを表示&lt;/button&gt;
	</code></pre>
	
	<p>script.js</p>
	<pre>
let g_popupCat;
$(()=>{

	g_popupCat = new PopupCat();
	g_popupCat.popupize('example1');
	
});

function test1(){
	
	g_popupCat.pop(()=>{
		alert('事後コールバック発動');
	});

}
	</pre>


	<br><time>2022-1-29</time>
</div>


<div id="sec19-4" class="sec4"  >
	<h3>自身のクラス名を取得する | this.constructor.name</h3>
	
	<pre><code>
class Animal{
	test(){
		console.log(this.constructor.name);
	}
}
	</code></pre>


	<br><time>2022-2-2</time>
</div>


<div id="sec19-0" class="sec4"  style="display:none">
	<h3>xxx</h3>


	<br><time>2022-1-21</time>
</div>


<div class="yohaku"></div>
<ol class="breadcrumb">
	<li><a href="/">ホーム</a></li>
	<li><a href="/note_prg">プログラミングの覚書</a></li>
	<li><a href="/note_prg/js/">JavaScriptの覚書</a></li>
	<li>JavaScriptの覚書</li>
</ol>
</div><!-- content -->
<div id="footer">(C) amaraimusi 2022-1-21</div>
</body>
</html>