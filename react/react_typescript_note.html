<!DOCTYPE html>
<html lang="ja">
<head>
	<meta charset="UTF-8">
	<meta name="google" content="notranslate" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>React + TypeScriptの覚書 | ワクガンス</title>
	<link rel='shortcut icon' href='/home/images/favicon.ico' />
	
	<link href="/note_prg/css/bootstrap-5.0.2-dist/css/bootstrap.min.css" rel="stylesheet">
	<link href="/note_prg/css/bootstrap-5.0.2-dist/font/css/open-iconic.min.css" rel="stylesheet">
	<link href="/note_prg/css/highlight/default.css" rel="stylesheet">
	<link href="/note_prg/css/common2.css" rel="stylesheet">
	<script src="/note_prg/js/jquery3.js"></script>	<!-- jquery-3.3.1.min.js -->
	<script src="/note_prg/css/bootstrap-5.0.2-dist/js/bootstrap.bundle.js"></script>
	<script src="/note_prg/js/vue.min.js"></script>
	<script src="/note_prg/js/highlight.pack.js"></script>
	<script src="/note_prg/js/livipage.js"></script>
	<script src="/note_prg/js/ImgCompactK.js"></script>

	<script>hljs.initHighlightingOnLoad();</script>
</head>
<body>
<div id="header" ><h1>React + TypeScriptの覚書 | ワクガンス</h1></div>
<div class="container">


<div id="sec1-1" class="sec4">
	<h3>ルーティング: 画面毎にtsxファイルを割り当てる</h3>
	
	
	１つのtsxファイルに全画面の関数コンポーネントを書くわけにもいかないため、
	画面ごとに割り当てられたtsxファイルをインポートして実行したいものです。例えば「http://localhost/demo」にアクセスしたとき、demo.tsxをインポートして実行します。<br>
	<br>

	このような動的なルーティングを実現するための一般的な方法は、React Routerを使用することです。React Routerは、指定されたURLに基づいて異なるReactコンポーネントを表示するための強力なルーティングライブラリです。<br>
	<br>
	以下は、React Routerを使用してdemo.tsxをhttp://localhost/demoでロードするための手順です：<br>
	<br>
	
	必要なパッケージをインストールします。
	<pre class="console">npm install react-router-dom @types/react-router-dom</pre>
	

	
	<p>resources/ts/index.tsx</p>
	<pre><code>
import React from 'react';
import ReactDOM from 'react-dom';
import {
  BrowserRouter as Router,
  Route,
  Routes
} from 'react-router-dom';
import Demo from './demo';

const App: React.FC = () =&gt; {
  return (
    &lt;Router&gt;
      &lt;Routes&gt;
        &lt;Route path="/demo" element={&lt;Demo /&gt;} /&gt;
        {/* 他のルートもこちらに追加可能 */}
      &lt;/Routes&gt;
    &lt;/Router&gt;
  );
};

export default App;

ReactDOM.render(&lt;App /&gt;, document.getElementById('react_app'));
	</code></pre>
	
	<p>resources/ts/demo.tsx</p>
	<pre><code>
import React from 'react';

const Demo: React.FC = () =&gt; {
  return &lt;div&gt;Demo Page!&lt;/div&gt;;
};

export default Demo;
	</code></pre>
	
	<p>resources/views/demo/index.blade.php</p>
	<pre><code>
&lt;!DOCTYPE html&gt;
&lt;html lang="{{ str_replace('_', '-', app()-&gt;getLocale()) }}"&gt;
    &lt;head&gt;
        &lt;meta charset="utf-8"&gt;
        &lt;meta name="viewport" content="width=device-width, initial-scale=1"&gt;

        &lt;title&gt;Laravel&lt;/title&gt;
        @viteReactRefresh
         @vite(['resources/sass/app.scss', 'resources/ts/index.tsx'])


    &lt;/head&gt;
    &lt;body&gt;
    	&lt;div id="react_app"&gt;&lt;/div&gt;&lt;!-- Reactの埋め込み部分 --&gt;
  
    &lt;/body&gt;
&lt;/html&gt;
	</code></pre>


	<br><time>2023-10-14 | 2023-10-15</time>
</div>


<div id="sec1-2" class="sec4" >
	<h3>表示切替ボタン | 閉じるボタン</h3>
	
	id属性で要素を指定して、表示/非表示を切り替える汎用的な関数コンポーネントの見本です。<br>
	<br>
	
	<p>resources/ts/cmn/ToggleButton.tsx</p>
	<pre><code>
// ToggleButton.tsx
import React, { useState } from 'react';

type ToggleButtonProps = {
  targetId: string;
  label: string;
};

const ToggleButton: React.FC&lt;ToggleButtonProps&gt; = ({ targetId, label }) =&gt; {
  const [isVisible, setIsVisible] = useState&lt;boolean&gt;(false);

  const toggleVisibility = () =&gt; {
    const element = document.getElementById(targetId);
    if (element) {
      if (isVisible) {
        element.style.display = 'none';
      } else {
        element.style.display = 'block';
      }
      setIsVisible(!isVisible);
    }
  };

  return &lt;button onClick={toggleVisibility} class="btn btn-info"&gt;{isVisible ? `${label}(閉じる)` : `${label}`}&lt;/button&gt;;
};

export default ToggleButton;
	</code></pre>

	<p>resources/ts/demo.tsx(クライアント側へToggleButton関数コンポーネントを実装)</p>
	<pre><code>
import React from 'react';
import ReactDOM from 'react-dom';
import ToggleButton from './cmn/ToggleButton';

const Demo: React.FC = () =&gt; {
  return &lt;div&gt;Demo Page!&lt;button type="button" class='btn btn-success'&gt;テスト&lt;/button&gt;&lt;/div&gt;;
};

ReactDOM.render(&lt;ToggleButton targetId="cat_contents" label="コンテンツ1" /&gt;, document.getElementById('toggle-button'));

export default Demo;
	</code></pre>
	
	<p>resources/views/demo/index.blade.php</p>
	<pre><code>
  		    &lt;div id="toggle-button"&gt;&lt;/div&gt; &lt;!-- ボタンをこの要素に埋め込みます --&gt;

   			 &lt;div id="cat_contents" style="display:none;"&gt;
				秋の初めごろはバッタやコオロギなどの虫たちが活発に活動します。&lt;br&gt;
				キュウリの苗のほとんどは、それらの虫たちに食べつくされてしまいます。&lt;br&gt;
				しかし、雑草の側で育つキュウリは、虫の被害が半分で済みます。&lt;br&gt;
				#自然 #農業
   			 &lt;/div&gt;
	</code></pre>
	
	<br><time>2023-10-15</time>
</div>


<div id="sec1-0" class="sec4" style="display:none">
	<h3>xxx</h3>


	<br><time>2023-10-14</time>
</div>


<div class="yohaku"></div>
<ol class="breadcrumb">
	<li><a href="/">ホーム</a></li>
	<li><a href="/note_prg">プログラミングの覚書</a></li>
	<li>React + TypeScriptの覚書</li>
</ol>
</div><!-- content -->
<div id="footer">(C) amaraimusi 2023-10-14</div>
</body>
</html>