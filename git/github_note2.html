<!DOCTYPE html>
<html lang="ja">
<head>
	<meta charset="UTF-8">
	<meta name="google" content="notranslate" />
   	<meta http-equiv="X-UA-Compatible" content="IE=edge">
   	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>GitHubの覚書 | ワクガンス</title>
	<link rel='shortcut icon' href='/home/images/favicon.ico' />
	
	<link href="/note_prg/css/bootstrap.min.css" rel="stylesheet">
	<link href="/note_prg/css/highlight/default.css" rel="stylesheet">
	<link href="/note_prg/css/common2.css" rel="stylesheet">

	<script src="/note_prg/js/jquery3.js"></script>	<!-- jquery-3.3.1.min.js -->
	<script src="/note_prg/js/bootstrap.min.js"></script>
	<script src="/note_prg/js/highlight.pack.js"></script>
	<script src="/note_prg/js/livipage.js"></script>
	<script src="/note_prg/js/ImgCompactK.js"></script>

	<script>hljs.initHighlightingOnLoad();</script>
</head>
<body>
<div id="header" ><h1>GitHubの覚書 | ワクガンス</h1></div>
<div class="container">


<div id="sec2-1" class="sec4">
	<h3>publicからprivateに変更する設定手順</h3>
	
	2018年にGitHubはMicrosoftに買収され、privateも条件付きながら無料で利用できるようになった。<br>
	<br>
	<p>手順</p>
	<ol class="list_lg">
		<li>
			GitHubのWEBサイトにアクセス→対象リポジトリを選択→「Setting」を選択する。<br>
			<img src="img/github_note2/sec2-1a1.png" />
		</li>
		<li>
			Setting画面を「Danger Zone」まで下にスクロールする。<br>
			そして「Make private」ボタンを押す。<br>
			<img src="img/github_note2/sec2-1a2.png" class="img_compact_k" />
		</li>
		<li>
			下側のテキストボックスにプロジェクト名を入力する。<br>
			プロジェクト名を入力するとすぐ下のボタンが押せるようになるので押す。<br>
			<img src="img/github_note2/sec2-1a3.png" class="img_compact_k" />
		</li>
		<li>
			GitHubアカウントのパスワードを入力して完了。<br>
			<img src="img/github_note2/sec2-1a4.png" class="img_compact_k" />
		</li>
	</ol>

	<br><time>2019-6-14</time>
</div>


<div id="sec2-2" class="sec4" >
	<h3>ローカルリポジトリのコミットを取り消す方法</h3>
	
	ローカルでコミットを行ったあとリモートへのプッシュに失敗することがある。<br>
	例えば100MBファイルを超えるファイルをローカルでコミット後、GitHubにプッシュしようとすると容量制限で拒否されるというケースである。<br>
	この場合、ローカルでのコミットを取り消す必要がある。<br>
	そのコミットの取り消し手順を以下に示す。<br>
	<br>
	

	
	<ol>
		<li>
			Eclipseのコミット履歴画面にて元に戻すコミットIDを確認する。<br>
			プロジェクトを右クリック→Team→Show in History<br>
			<img src="img/github_note2/sec2-2a1.png" class="img_compact_k" />
			<img src="img/github_note2/sec2-2a2.png" class="img_compact_k" />
		</li>
		<li>
			GitBashを起動し、cdコマンドで対象プロジェクトに移動する。<br>
			<br>
		</li>
		<li>
			下記コマンドによりコミットの取り消しを行える<br>
			<pre>git reset --hard コミットID</pre>
		</li>

	</ol>
	


	<br><time>2019-10-22</time>
</div>


<div id="sec2-3" class="sec4" >
	<h3>プロジェクトのコピーとEclipseのGit | .project</h3>
	プロジェクトをディレクトリごとコピーし、そのコピーしたディレクトリをEclipseで開くと自動的にリポジトリとして管理されてしまうことがある。
	<aside>※Windowsエクスプローラによるコピー</aside>
	
	<p>原因と対策</p>
	Eclipseのおいて、ディレクトリの直下に「.project」ファイルがあると、そのディレクトリはプロジェクト認識されるのが原因。<br>
	「.project」ファイルが存在するディレクトリはリポジトリとして管理される。<br>
	Eclipse中でリポジトリとして管理したくない場合、「.project」ファイルは除去しておくこと。<br>
	<br>
	
	<br><time>2020-6-7</time>
</div>


<div id="sec2-4" class="sec4">
	<h3>個人アクセストークンの発行 | Personal access tokens</h3>
	
	<ol class="list_lg">
	
		<li>
			GitHubのサイトに自分のアカウントでログイン。
			右上の自分アイコンからSetteingをクリック。
			<br><img src="img/github_note2/sec2-4a1.png" class="img_compact_k" />
		</li>
	
		<li>
			Developer settingを選択
			<br><img src="img/github_note2/sec2-4a2.png" class="img_compact_k" />
		</li>
	
		<li>
				左側メニューからPersonal access tokens →
		文章中からGenerate a personal access token
			<br><img src="img/github_note2/sec2-4a3.png" class="img_compact_k" />
		</li>
	
		<li>
			New personal access token画面にてすべてのチェックボックスにチェックを入れ、「Generate token」ボタンを押下
		以上で個人アクセストークンが発行される。
			<br><img src="img/github_note2/sec2-4a4.png" class="img_compact_k" />
			<img src="img/github_note2/sec2-4a5.png" class="img_compact_k" />
			<img src="img/github_note2/sec2-4a6.png" class="img_compact_k" />
		</li>
		
	</ol>


	<br><time>2020-12-3</time>
</div>


<div id="sec2-5" class="sec4" >
	<h3>Git Hub | PR | プルリクエストのレビュー必須化について</h3>
	
	<a href="https://docs.github.com/ja/free-pro-team@latest/github/administering-a-repository/enabling-required-reviews-for-pull-requests" target="_blank">参考：GitHub Docs:プルリクエストの必須レビューを有効にする</a>
	<ul class="list_lg">
	
		<li>
		Require pull request reviews before merging<br>
		マージする前にプルリクエストのレビューを要求できる。
		</li>
	
		<li>
		ブランチ単位でプルリクエストのレビュー必須化ができる。
		<aside>ブランチ名はパターン入力らしいので複数のブランチにまたがってレビュー必須化ができるかもしれない</aside>
		</li>
	
		<li>
		Required approving reviews<br>
		必要な承認レビュー数を設定できる。
		</li>
	
		<li>
		Dismiss stale pull request approvals when new commits are pushed<br>
		新しいコミットがプッシュされたときに、古いプルリクエストの承認を却下する。<br>
		</li>
	
		<li>
		Restrict who can dismiss pull request reviews<br>
		プルリクエストのレビューを却下できるユーザーを制限する。
		</li>
	
		<li>
		Include administrators<br>
		設定されたすべての制約がリポジトリ管理者に強制されます。
		</li>
	

	</ul>


	<br><time>2012-12-4</time>
</div>


<div id="sec2-6" class="sec4" >
	<h3>SSH Keyの作成とGitHubへ登録 | 公開鍵と秘密鍵</h3>
	
	<ol class="list_lg">
		<li>
			<pre class="console">$ cd ~/.ssh</pre>
			
		</li>
		
		<li>
			SSH Keyの作成
			<pre class="console">$ssh-keygen -t rsa</pre>
			３回ほど質問されるが、そのままEnterでOK.
		</li>
		
		<li>
			クリップボードにSSH keyをコピー（id_rsa.pubファイルの中身をコピー）（Windows用のコマンド）
			<pre class="console">$ clip &lt; ~/.ssh/id_rsa.pub</pre>
		</li>
		
		<li>
			GitHubサイトにSSH Keysを登録する。<br>
			<br>
			GitHubのマイページからSSH Keyの登録画面を開く。
			<pre>GitHubのマイページ→Setting→左メニューのSSH and GPG keys→New SSH keyボタン</pre>
			登録画面を開いたらTitleに任意の名前、「Key」にクリップボードにコピーしてあるSSH Keyを張り付ける。<br>
			Add keyボタンを押して登録完了<br>
			<br>
		</li>
		
		<li>
			接続確認
			<pre class="console">$ ssh -T git@github.com</pre>
			「 You've successfully authenticated, but GitHub does not provide shell access.」という感じのメッセージが出たら成功。
			
		</li>
		
	</ol>


	<br><time>2020-12-26</time>
</div>


<div id="sec2-7" class="sec4" >
	<h3>Gitの改行コードを無変換にする | core.autocrlf=false</h3>

	<p>core.autocrlf=falseについて</p>

	Gitはチェックアウトやコミット時に設定によっては勝手にソースコードの改行を変換してしまう。<br>
	勝手な改行を行わないようにするには下記コマンドを実行する。<br>
	<pre class="console">
$ cd ~
$ git config --global core.autocrlf false
	</pre>

	設定の確認コマンド
	<pre class="console">git config --list --global</pre>
	<br>
	
	<p>プロジェクト別で設定する場合、localを指定して設定。</p>
	<aside>※global設定よりlocal設定が優先される。</aside>
	<pre class="console">
$ cd プロジェクトのルートパス
$ git config --local core.autocrlf false
$ git config --list --local
	</pre>
	<br>
	
	<p>core.autocrlfのその他設定値について</p>
	<table class="table">
		<thead>
			<tr><th>core.autocrlfのセット値</th><th>チェックアウト時</th><th>コミット時</th></tr>
		</thead>
		<tbody>
			<tr><td>true</td><td>LFからCRLFに変換</td><td>CRLFからLF変換</td></tr>
			<tr><td>input</td><td>変換せず</td><td>CRLFからLFに変換</td></tr>
			<tr><td>false</td><td>変換せず</td><td>変換せず</td></tr>
	
		</tbody>
	</table>



	<br><time>2020-12-27</time>
</div>


<div id="sec2-8" class="sec4" >
	<h3>ローカル環境専用のファイル管理対象外 | .git/info/exclude</h3>
	
	チーム開発において、個人的に作成したファイルは.gitnoreに追記しづらい。<br>
	この場合は「.git/info/exclude」ファイルに記述するとよい。<br>
	<br>
	
	例：my_tool内のファイルはGit管理対象外にする。
	<pre class="console">
$ cd ~/git/animals
$ echo my_tool/* >> .git/info/exclude
	</pre>
	<p>ディレクトリ構造</p>
	<pre>
- animals<span style="color:#5bb734"> ←プロジェクト</span>
	- .git
		- info
			- exclude　<span style="color:#5bb734">←このファイルに管理対象外ファイルを記述する。</span>
	- my_tool
		- test_tool.php <span style="color:#5bb734">←管理対象外ファイルになる</span>
	- index.html
	</pre>
	
	<p>.git/info/excludeファイルの中身</p>
	<pre>
# git ls-files --others --exclude-from=.git/info/exclude
# Lines that start with '#' are comments.
# For a project mostly in C, the following would be a good set of
# exclude patterns (uncomment them if you want to use them):
# *.[oa]
# *~
my_tool/*
	</pre>
	
	<p>その他の記述例</p>
	<pre class="console">$ echo test/dummy/xxx.php >> .git/info/exclude</pre>
	「ルート/test/dummy/xxx.php」ファイルをGit管理対象外にする。<br>
	<br>
	
	<br><time>2021-1-2</time>
</div>


<div id="sec2-0" class="sec4" style="display:none">
	<h3>xxx</h3>


	<br><time>2019-3-12</time>
</div>



<div class="yohaku"></div>
<ol class="breadcrumb">
	<li><a href="/">ホーム</a></li>
	<li><a href="/note_prg">プログラミングの覚書</a></li>
	<li><a href="/note_prg/git/">Gitの覚書</a></li>
	<li>GitHubの覚書</li>
</ol>
</div><!-- content -->
<div id="footer">(C) kenji uehara 2019-6-14</div>
</body>
</html>