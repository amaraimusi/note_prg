<!DOCTYPE html>
<html lang="ja">
<head>
	<meta charset="UTF-8">
	<meta name="google" content="notranslate" />
   	<meta http-equiv="X-UA-Compatible" content="IE=edge">
   	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>SVGの覚書</title><link rel='shortcut icon' href='/home/images/favicon.ico' />
	<link href="/note_prg/css/bootstrap.min.css" rel="stylesheet">
	<link href="/note_prg/css/highlight/default.css" rel="stylesheet">
	<link href="/note_prg/css/common2.css" rel="stylesheet">

	<script src="/note_prg/js/jquery-1.11.1.min.js"></script>
	<script src="/note_prg/js/bootstrap.min.js"></script>
	<script src="/note_prg/js/highlight.pack.js"></script>
	<script src="/note_prg/js/livipage.js"></script>
	<script src="/note_prg/js/ImgCompactK.js"></script>

	<style>

	</style>
	<script>hljs.initHighlightingOnLoad();</script>
</head>
<body>
<div id="header" ><h1>SVGの覚書</h1></div>
<div class="container">


<div id="sec2-1" class="sec4" >
	<h3>SVG画像の背景に画像を指定する</h3>
	
	HTMLのimg要素にsvgファイルをセットする方法だと背景画像の表示に<strong>失敗</strong>する
	セキュリティのため、svgに埋め込められたリンクや画像パスは無効かされるためである。<br>
	これを回避するにはsvgファイルを読み込むのでなく、svgファイルの中身のソースコードを直接ＨＴＭＬに記述すると良い。<br>
	なので背景画像付きのsvgファイルをHTMLで表示させるには、JavaScriptでsvgファイルの中身のコードを抜き出し、
	コード中の背景画像のパスを書き換えて、HTMLの指定要素にコードを挿入する方法が良いだろう。
	<br>

<svg baseProfile="full" height="200" width="200" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <image height="100%" width="100%" xlink:href="img/svg_note2/sec2-1.jpg"/>
  <rect fill="lightgray" fill-opacity="0.5" height="200" stroke="black" width="200" x="0" y="0"/>
  <line stroke="black" x1="0" x2="200" y1="100" y2="100"/>
  <line stroke="black" x1="66.66" x2="66.66" y1="0" y2="200"/>
  <line stroke="black" x1="133.33" x2="133.33" y1="0" y2="200"/>
</svg>
	
	以下のコードをHTMLに直接記述すること。
	<pre><code>
&lt;svg baseProfile="full" height="200" width="200" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"&gt;
  &lt;image height="100%" width="100%" xlink:href="img/svg_note2/sec2-1.jpg"/&gt;
  &lt;rect fill="lightgray" fill-opacity="0.5" height="200" stroke="black" width="200" x="0" y="0"/&gt;
  &lt;line stroke="black" x1="0" x2="200" y1="100" y2="100"/&gt;
  &lt;line stroke="black" x1="66.66" x2="66.66" y1="0" y2="200"/&gt;
  &lt;line stroke="black" x1="133.33" x2="133.33" y1="0" y2="200"/&gt;
&lt;/svg&gt;
	</code></pre>
	
	<hr>
	
	以下はsvgファイルをimg要素にセットする方法だが、見ての通り背景画像は無視される。<br>
	
	<img src="img/svg_note2/sec2-1.svg" alt="" />
	<pre><code>&lt;img src="img/svg_note2/sec2-1.svg" alt="" /&gt;</code></pre>
	<br><time>2023-11-23</time>
	
</div>


<div id="sec2-2" class="sec4" >
	<h3>SVGコードを外枠に合わせてフィットさせる</h3>
	

	<p>縮小フィット</p>
	<div style="width:150px; height:130px; background-color:red;">
	    <svg baseProfile="full" viewBox="0 0 200 200" style="width: 100%; height: 100%;" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
	      <image height="100%" width="100%" xlink:href="img/svg_note2/sec2-1.jpg"/>
	      <rect fill="lightgray" fill-opacity="0.5" height="200" stroke="black" width="200" x="0" y="0"/>
	      <line stroke="black" x1="0" x2="200" y1="100" y2="100"/>
	      <line stroke="black" x1="66.66" x2="66.66" y1="0" y2="200"/>
	      <line stroke="black" x1="133.33" x2="133.33" y1="0" y2="200"/>
	    </svg>
	</div>
	
	<p>拡大フィット</p>
	<div style="width:500px; height:400px; background-color:red;">
	    <svg baseProfile="full" viewBox="0 0 200 200" style="width: 100%; height: 100%;" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
	      <image height="100%" width="100%" xlink:href="img/svg_note2/sec2-1.jpg"/>
	      <rect fill="lightgray" fill-opacity="0.5" height="200" stroke="black" width="200" x="0" y="0"/>
	      <line stroke="black" x1="0" x2="200" y1="100" y2="100"/>
	      <line stroke="black" x1="66.66" x2="66.66" y1="0" y2="200"/>
	      <line stroke="black" x1="133.33" x2="133.33" y1="0" y2="200"/>
	    </svg>
	</div>
	
	<p>フィットなし</p>
	<svg baseProfile="full" height="200" width="200" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
	  <image height="100%" width="100%" xlink:href="img/svg_note2/sec2-1.jpg"/>
	  <rect fill="lightgray" fill-opacity="0.5" height="200" stroke="black" width="200" x="0" y="0"/>
	  <line stroke="black" x1="0" x2="200" y1="100" y2="100"/>
	  <line stroke="black" x1="66.66" x2="66.66" y1="0" y2="200"/>
	  <line stroke="black" x1="133.33" x2="133.33" y1="0" y2="200"/>
	</svg>
	
	<time>2023-11-25</time>
	
</div>


<div id="sec2-3" class="sec4" >
	<h3>正しいSVG画像</h3>
	
	SVGファイルはwidthとheightを正確に記述しないと不具合が生じます。<br>
	<br>
	
	<p>SVG画像ファイルのコード（ img/svg_note2/sec2-3a1.svgのコード）</p>
	<pre>
&lt;svg baseProfile="full" <strong>width="160" height="120"</strong> xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" &gt;
    &lt;rect fill="lightgray" fill-opacity="0.5" stroke="#788187" width="53.333" height="60" x="0" y="0"&gt;&lt;/rect&gt;
    &lt;text x="15.667" y="31" fill="#ffffff" font-size="24"&gt;A&lt;/text&gt;
    &lt;text x="14.667" y="30" fill="#408055" font-size="24"&gt;A&lt;/text&gt;

    &lt;rect fill="lightgray" fill-opacity="0.5" stroke="#788187" width="53.333" height="60" x="53.333" y="0"&gt;&lt;/rect&gt;
    &lt;text x="69" y="31" fill="#ffffff" font-size="24"&gt;B&lt;/text&gt;
    &lt;text x="68" y="30" fill="#408055" font-size="24"&gt;B&lt;/text&gt;

    &lt;rect fill="lightgray" fill-opacity="0.5" stroke="#788187" width="53.333" height="60" x="106.667" y="0"&gt;&lt;/rect&gt;
    &lt;text x="122.333" y="31" fill="#ffffff" font-size="24"&gt;C&lt;/text&gt;
    &lt;text x="121.333" y="30" fill="#408055" font-size="24"&gt;C&lt;/text&gt;

    &lt;rect fill="lightgray" fill-opacity="0.5" stroke="#788187" width="53.333" height="60" x="0" y="60"&gt;&lt;/rect&gt;
    &lt;text x="15.667" y="91" fill="#ffffff" font-size="24"&gt;D&lt;/text&gt;
    &lt;text x="14.667" y="90" fill="#408055" font-size="24"&gt;D&lt;/text&gt;

    &lt;rect fill="lightgray" fill-opacity="0.5" stroke="#788187" width="53.333" height="60" x="53.333" y="60"&gt;&lt;/rect&gt;
    &lt;text x="69" y="91" fill="#ffffff" font-size="24"&gt;E&lt;/text&gt;
    &lt;text x="68" y="90" fill="#408055" font-size="24"&gt;E&lt;/text&gt;

    &lt;rect fill="lightgray" fill-opacity="0.5" stroke="#788187" width="53.333" height="60" x="106.667" y="60"&gt;&lt;/rect&gt;
    &lt;text x="122.333" y="91" fill="#ffffff" font-size="24"&gt;F&lt;/text&gt;
    &lt;text x="121.333" y="90" fill="#408055" font-size="24"&gt;F&lt;/text&gt;
&lt;/svg&gt;
	</pre>
	
	<p>見本1</p>
	<img src="img/svg_note2/sec2-3a1.svg" alt="" />
	<pre><code>
		&lt;img src="img/svg_note2/sec2-3a1.svg" alt="" /&gt;
	</code></pre>
	<hr>
	
	<p>見本2</p>
	正しいSVG画像は幅サイズをCSSスタイルで変更できます。<br>
	<img src="img/svg_note2/sec2-3a1.svg" alt=""  style="width:320px;height:auto;" />
	<pre><code>
		&lt;img src="img/svg_note2/sec2-3a1.svg" alt=""  style="width:320px;height:auto;" /&gt;
	</code></pre>
	<hr>
	
	<p>見本3</p>
	<div style="width:80px;height:auto;" >
		<img src="img/svg_note2/sec2-3a1.svg" alt=""  style="width:100%;height:100%;" />
	</div>
	<pre><code>
	&lt;div style="width:80px;height:auto;" &gt;
		&lt;img src="img/svg_note2/sec2-3a1.svg" alt=""  style="width:100%;height:100%;" /&gt;
	&lt;/div&gt;
	</code></pre>
	<br>
	
	
	<p>見本4 失敗ケース</p>
	SVGファイルから「width="160" height="120" 」の部分を抜くと、画像表示はされるものの、widthやheightで幅サイズを変えることができなくなります。<br>
	<br>
	widthとheightを抜いたsvgファイル。
	<pre><code>
		&lt;svg baseProfile="full" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" &gt;
		～省略～
	</code></pre>
	<img src="img/svg_note2/sec2-3a2.svg" alt=""  style="width:400px;height:auto;" /><br>
	widthが効かなくなり幅サイズが変わりません。
	<pre><code>
	&lt;img src="img/svg_note2/sec2-3a2.svg" alt=""  style="width:400px;height:auto;" /&gt;
	</code></pre>

	
	<time>2023-11-23</time>
	
</div>


<div id="sec2-4" class="sec4" >
	<h3>JPG/PNG画像の上にSVG画像を重ねる:SVGの背景色を透明にする</h3>
	
	
	<p>背景色は半透明</p>
	<div style="position: relative; width: 360px; height:240px">
        <img src="img/svg_note2/sec2-4a1.jpg" alt="PNG Image" style="position: absolute; width: 100%; height:100%; top: 0; left: 0;">
        <img src="img/svg_note2/sec2-4a1.svg" alt="SVG Image" style="position: absolute; width: 100%; height:100%; top: 0; left: 0; z-index: 1;">
    </div>
    重ねる
    <pre><code>
&lt;div style="position: relative; width: 360px; height:240px"&gt;
       &lt;img src="img/svg_note2/sec2-4a1.jpg" alt="PNG Image" style="position: absolute; width: 100%; height:100%; top: 0; left: 0;"&gt;
       &lt;img src="img/svg_note2/sec2-4a1.svg" alt="SVG Image" style="position: absolute; width: 100%; height:100%; top: 0; left: 0; z-index: 1;"&gt;
&lt;/div&gt;
    </code></pre>
    SVG
    <pre>
&lt;svg baseProfile="full" width="160" height="120" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" &gt;
&lt;rect fill="lightgray" <strong>fill-opacity="0.5"</strong> stroke="#788187" width="53.333" height="60" x="0" y="0"&gt;&lt;/rect&gt;
&lt;text x="15.667" y="31" fill="#ffffff" font-size="24"&gt;A&lt;/text&gt;
&lt;text x="14.667" y="30" fill="#408055" font-size="24"&gt;A&lt;/text&gt;
 ～略～
    </pre>
	<hr>
	<p>背景色は完全に透明</p>
	<div class="image-container" style="position: relative; width: 360px; height:240px">
        <img src="img/svg_note2/sec2-4a1.jpg" alt="PNG Image" style="position: absolute; width: 100%; height:100%; top: 0; left: 0;">
        <img src="img/svg_note2/sec2-4a3.svg" alt="SVG Image" style="position: absolute; width: 100%; height:100%; top: 0; left: 0; z-index: 1;">
    </div>
	<pre>
&lt;svg baseProfile="full" width="160" height="120" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" &gt;
&lt;rect <strong>fill="transparent"</strong> stroke="#788187" width="53.333" height="60" x="0" y="0"&gt;&lt;/rect&gt;
&lt;text x="15.667" y="31" fill="#ffffff" font-size="24"&gt;A&lt;/text&gt;
&lt;text x="14.667" y="30" fill="#408055" font-size="24"&gt;A&lt;/text&gt;
 ～略～
	</pre>
	
	<time>2023-12-03</time>
	
</div>


<div id="sec2-0" class="sec4" style="display:none">
	<h3>XXX</h3>
	
	<time>2023-11-23</time>
	
</div>


<div class="yohaku"></div>
<ol class="breadcrumb">
	<li><a href="/">ホーム</a></li>
	<li><a href="/note_prg">プログラミングの覚書</a></li>
	<li><a href="/note_prg/html/">HTMLの覚書</a></li>
	<li>SVGの覚書</li>
</ol>
</div><!-- content -->
<div id="footer">(C) kenji uehara 2023-11-23</div>
</body>
</html>