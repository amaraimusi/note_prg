<!DOCTYPE html>
<html lang="ja">
<head>
	<meta charset="UTF-8">
	<meta name="google" content="notranslate" />
   	<meta http-equiv="X-UA-Compatible" content="IE=edge">
   	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>PHP8の覚書 | ワクガンス</title>
	<link rel='shortcut icon' href='/home/images/favicon.ico' />
	
	<link href="/note_prg/css/bootstrap.min.css" rel="stylesheet">
	<link href="/note_prg/css/highlight/default.css" rel="stylesheet">
	<link href="/note_prg/css/common2.css" rel="stylesheet">
	<script src="/note_prg/js/jquery-3.5.1.min.js"></script>	
	<script src="/note_prg/js/bootstrap.min.js"></script>
	<script src="/note_prg/js/highlight.pack.js"></script>
	<script src="/note_prg/js/livipage.js"></script>
	<script src="/note_prg/js/ImgCompactK.js"></script>

	<script>hljs.initHighlightingOnLoad();</script>
</head>
<body>
<div id="header" ><h1>PHP8の覚書 | ワクガンス</h1></div>
<div class="container">


<div id="sec22-1" class="sec4" >
    <h3>iniファイル内のデータを読み込み、配列にセットする</h3>
    
iniファイルからデータを読み込んで配列にセットするPHPコードは以下のようになります。


<pre>$config = parse_ini_file("config.ini");</pre>
上記のコードでは、parse_ini_file() 関数を使用して、指定された config.ini ファイルからデータを読み込みます。読み込んだデータは、連想配列として $config 変数に格納されます。<br>
<br>
config.ini ファイルの例を以下に示します。<br>
<pre>
[database]
host = localhost
username = root
password = secret
dbname = mydatabase

[server]
ip = 192.168.0.1
port = 8080
</pre>


上記の config.ini ファイルから、以下のような配列が生成されます。
<pre>
Array
(
    [database] => Array
        (
            [host] => localhost
            [username] => root
            [password] => secret
            [dbname] => mydatabase
        )

    [server] => Array
        (
            [ip] => 192.168.0.1
            [port] => 8080
        )
)
</pre>
上記のように、セクション名をキーとして、各キーに対応するセクション内のキーと値のペアが、2次元配列として格納されます。

    <br><time>2023-2-24</time>
</div>


<div id="sec22-2" class="sec4" >
    <h3>配列をiniファイルへ書き込む   </h3>

配列をiniファイルへ書き込むPHPコードは以下のようになります。

<pre><code>
$data = array(
    'database' => array(
        'host' => 'localhost',
        'username' => 'root',
        'password' => 'secret',
        'dbname' => 'mydatabase'
    ),
    'server' => array(
        'ip' => '192.168.0.1',
        'port' => '8080'
    )
);

$config = '';

foreach ($data as $key => $value) {
    $config .= "[$key]\n";
    foreach ($value as $k => $v) {
        $config .= "$k = $v\n";
    }
    $config .= "\n";
}

file_put_contents('config.ini', $config);
</code></pre>
上記のコードでは、配列 $data をループ処理して、iniファイルの文字列を生成します。生成された文字列は file_put_contents() 関数を使用して、config.ini ファイルに書き込まれます。<br>
<br>
生成される config.ini ファイルの内容は以下のようになります。<br>

<pre>
makefile
Copy code
[database]
host = localhost
username = root
password = secret
dbname = mydatabase

[server]
ip = 192.168.0.1
port = 8080
</pre>
上記のように、セクション名をキーとして、各キーに対応するセクション内のキーと値のペアが、iniファイルに書き込まれます。


    <br><time>2023-2-24</time>
</div>


<div id="sec22-0" class="sec4" style="display:none">
	<h3>xxx</h3>


	<br><time>2023-2-24</time>
</div>


<div class="yohaku"></div>
<ol class="breadcrumb">
	<li><a href="/">ホーム</a></li>
	<li><a href="/note_prg">プログラミングの覚書</a></li>
	<li><a href="/note_prg/php/">PHPの覚書</a></li>
	<li>PHP8の覚書</li>
</ol>
</div><!-- content -->
<div id="footer">(C) kenji uehara 2023-2-24</div>
</body>
</html>